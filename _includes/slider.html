<!-- Responsive slider - START -->
<div class="iosSliderContainer home">
  <div class = 'iosSlider'>
    <div class = 'slider'>
    </div>

    <a class="slider-control prev" >&lt;</a>
    <a class="slider-control next" >&gt;</a>

    <div class="pages">
    </div>
  </div>
</div>

<script src="{{ site.baseurl }}/js/jquery.iosslider.min.js"></script>
<script type="text/javascript">
  var baseurl = "{{ site.baseurl }}";
  /**
   * Randomize array element order in-place.
   * Using Fisher-Yates shuffle algorithm.
   */
  function shuffleArray(array) {
    for (var i = array.length - 1; i > 0; i--) {
      var j = Math.floor(Math.random() * (i + 1));
      var temp = array[i];
      array[i] = array[j];
      array[j] = temp;
    }
    return array;
  }

  $(document).ready(function() {
    var doc = $(document);
    var size = (Math.min(doc.width(), doc.height()) <= 768) ?
      '-small' : '';

    var files = shuffleArray([1, 2, 3, 4]);
    for (var i = 0; i < files.length; i++) {
      var file = files[i];
      var image = $('<img />', {
        src: baseurl + '/images/slide-' + file + size + '.jpg'
      });
      var container = $('<div/>', {
        'class': 'page'
      });
      container.append(image);
      $('.iosSlider .slider').append(container);
      $('.iosSlider .pages').append($('<a />', {
        'class': 'page'
      }));
    }

    $('.pages .page').first().addClass('active');

    $('.iosSlider').iosSlider({
      autoSlide: true,
      snapToChildren: true,
      desktopClickDrag: true,
      keyboardControls: true,
      navNextSelector: $('.next'),
      navPrevSelector: $('.prev'),
      navSlideSelector: $('.pages .page'),
      onSlideChange: slideChange,
      infiniteSlider: true,
      autoSlideTimer: 2500
    });
  });

  function slideChange(args) {
    $('.pages .page').removeClass('active');
    $('.pages .page:eq(' + (args.currentSlideNumber - 1) + ')').addClass('active');
  }
</script>
